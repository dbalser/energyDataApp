@model energyDataApp.Models.SearchParms
@using System.IO;
@using CsvHelper;
@using energyDataApp.Models;

<div id="Index">

    <form method="post" asp-controller="Home" asp-action="Create">

        <div id="FilterContainor">

            <select asp-for="FilterCol">
                <option value="">Select a Column</option>

                <option value="avgprice">Avg Price</option>
                <option value="maxprice">Max Price</option>
                <option value="minprice">Min Price</option>
                <option value="avgcongestion">Avg Congestion</option>
                <option value="maxcongestion">Max Congestion</option>
                <option value="mincongestion">Min Congestion</option>
            </select>

            <input asp-for="MaxNum" type="number" placeholder="max" />

            <input asp-for="MinNum" type="number" placeholder="min" />

        </div>

        <div id="SortContainor">

            <select asp-for="SortCol">
                <option value="">Select a Column</option>

                <option value="node">Node</option>
                <option value="iso">ISO</option>
                <option value="nodetype">Node Type</option>
                <option value="pricingtype">Pricing Type</option>
                <option value="state">State</option>
                <option value="county">County</option>
                <option value="avgprice">Avg Price</option>
                <option value="maxprice">Max Price</option>
                <option value="minprice">Min Price</option>
                <option value="avgcongestion">Avg Congestion</option>
                <option value="maxcongestion">Max Congestion</option>
                <option value="mincongestion">Min Congestion</option>
            </select>

            <select asp-for="SortMethod">
                <option value="">Select Sorting Pattern</option>

                <option value="abc">ABC / 123</option>
                <option value="cba">CBA / 321</option>
            </select>

        </div>

        <input type="submit" value="Update List" />

        <div id="EnergyReadings">

            <ul>

                @{
                    TextReader reader = new StreamReader("DataTable.csv");
                    var csv = new CsvReader(reader);
                    csv.Read();
                    csv.ReadHeader();
                    @*List<> aList = new List<T>;*@
                    while (csv.Read())
                    {
                        var record = csv.GetRecord<EnergyData>();

                        <li>

                            <div id="BasicInfo">

                                <div id="row1">
                                    <p>Node</p>
                                    <p>@record.NODE</p>
                                    <p>State</p>
                                    <p>@record.State</p>
                                    <p>@record.ISO</p>
                                    <p>ISO</p>
                                </div>

                                <div id="row2">
                                    <p>Node Type</p>
                                    <p>@record.NodeType</p>
                                    <p>County</p>
                                    <p>@record.County</p>
                                    <p>Pricing Type</p>
                                    <p>@record.PricingType</p>
                                </div>
                            </div>

                            <div id="NumericalInfo">

                                <div id="row1">
                                    <p>Avg Price</p>
                                    <p>@record.AvgPrice</p>
                                    <p>Max Pric</p>
                                    <p>@record.MaxPrice</p>
                                    <p>Min Price</p>
                                    <p>@record.MinPrice</p>
                                </div>

                                <div id="row2">
                                    <p>Avg Congestion</p>
                                    <p>@record.AvgCongestion</p>
                                    <p>Max congestion</p>
                                    <p>@record.MaxCongestion</p>
                                    <p>Min Congestion</p>
                                    <p>@record.MinCongestion</p>
                                </div>
                            </div>
                        </li>
                    }
                }
           </ul>
        </div>
    </form>
</div>
